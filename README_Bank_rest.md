# Система управления банковскими картами

## Описание проекта

REST API для управления банковскими картами, пользователями и транзакциями. Система предоставляет безопасный и масштабируемый способ работы с банковскими операциями.

## Основные возможности

### Управление пользователями
- Аутентификация через JWT токены
- Роли пользователей: USER и ADMIN
- Безопасное хранение паролей с BCrypt

### Управление картами
- Создание карт админом
- Просмотр карт с маскированием номеров
- Блокировка карт по запросу
- Отслеживание баланса и статуса карт
- Шифрование номеров карт в базе данных

### Транзакции
- Переводы между картами одного пользователя
- История транзакций с пагинацией
- Валидация операций (проверка баланса, статуса карт)
- Отслеживание статуса транзакций

### Безопасность
- JWT аутентификация для stateless архитектуры
- Шифрование чувствительных данных (номера карт)
- Role-based access control (RBAC)
- Валидация всех входящих данных

## Технологический стек

### Backend
- Java 21 - современная версия Java
- Spring Boot 3.x - основной фреймворк
- Spring Security - аутентификация и авторизация
- Spring Data JPA - работа с базой данных
- JWT - токены для аутентификации

### База данных
- PostgreSQL - основная реляционная БД
- Liquibase - управление миграциями схемы БД

### Тестирование
- JUnit 5 - unit и integration тесты
- Spring Boot Test - тестирование Spring компонентов
- MockMvc - тестирование REST API

## Основные компоненты

### Controllers
- `AuthController` - аутентификация и регистрация
- `CardController` - операции с картами для пользователей
- `TransactionController` - переводы между картами
- `AdminController` - административные операции
- `CardBlockRequestController` - запросы на блокировку карт

### Services
- `UserService` - управление пользователями
- `CardService` - бизнес-логика карт
- `TransactionService` - логика переводов
- `CardBlockRequestService` - обработка запросов блокировки
- `AdminService` - административные операции

### Repositories
- `UserRepository` - операции с пользователями
- `CardRepository` - операции с картами
- `TransactionRepository` - операции с транзакциями
- `CardBlockRequestRepository` - операции с запросами блокировки

## Безопасность

### Аутентификация
- JWT токены с ограниченным временем жизни
- BCrypt для хеширования паролей
- Stateless архитектура без сессий

### Шифрование данных
- AES-256 для шифрования номеров карт
- Отдельные ключи для разных типов данных
- Маскирование номеров карт в API ответах

### Авторизация
- Role-based access control (RBAC)
- Защита на уровне методов с помощью аннотаций
- Валидация прав доступа для каждого endpoint

## Тестирование

### Стратегия тестирования
- Unit тесты для бизнес-логики сервисов
- Integration тесты для REST API endpoints
- Repository тесты для работы с базой данных
- Security тесты для проверки авторизации

### Покрытие кода
- Минимум 80% общее покрытие
- 100% покрытие критической бизнес-логики
- Изолированные тесты с тестовой базой данных
